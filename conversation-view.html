<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Просмотр разговора</title>
  <link rel="stylesheet" href="admin-styles.css">
  <link rel="stylesheet" href="dashboard-styles.css">
</head>
<body>
  <div class="conversation-view-container">
    <!-- Шапка -->
    <header class="conversation-header">
      <button class="btn-back" onclick="goBack()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Назад
      </button>
      
      <div class="conversation-header-info">
        <h1 id="conversationTitle">Загрузка...</h1>
        <div class="conversation-header-meta">
          <span id="conversationDate"></span>
          <span>•</span>
          <span id="conversationDuration"></span>
        </div>
      </div>
      
      <div class="conversation-header-score">
        <div class="score-label">Общий балл</div>
        <div class="score-value" id="conversationScore">0.0</div>
      </div>
    </header>

    <!-- Аудио плеер (заглушка) -->
    <div class="audio-player">
      <div class="audio-controls">
        <button class="btn-play" id="playButton" onclick="togglePlay()">
          <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
          <svg class="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
          </svg>
        </button>
        
        <div class="audio-time">
          <span id="currentTime">0:00</span>
          <span>/</span>
          <span id="totalTime">0:00</span>
        </div>
        
        <div class="audio-progress">
          <div class="audio-progress-bar">
            <div class="audio-progress-fill" id="progressFill"></div>
          </div>
          <input 
            type="range" 
            class="audio-progress-input" 
            id="progressInput"
            min="0" 
            max="100" 
            value="0"
            oninput="seekAudio(this.value)"
          >
        </div>
        
        <div class="audio-speed">
          <select id="speedSelect" onchange="changeSpeed(this.value)">
            <option value="0.5">0.5x</option>
            <option value="0.75">0.75x</option>
            <option value="1" selected>1x</option>
            <option value="1.25">1.25x</option>
            <option value="1.5">1.5x</option>
            <option value="2">2x</option>
          </select>
        </div>
      </div>
      
      <div class="audio-notice" id="audioNotice" style="display: none;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        <span id="audioNoticeText">Аудио-файл недоступен</span>
      </div>
    </div>

    <!-- Транскрибация -->
    <div class="transcript-container">
      <div class="transcript-header">
        <h2>Транскрибация разговора</h2>
        <button class="btn-secondary" onclick="downloadTranscript()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Скачать
        </button>
      </div>
      
      <div class="transcript-list" id="transcriptList">
        <!-- Будет заполнено через JavaScript -->
      </div>
    </div>
  </div>

  <script src="audio-storage.js"></script>
  <script src="conversation-view.js"></script>
</body>
</html>
